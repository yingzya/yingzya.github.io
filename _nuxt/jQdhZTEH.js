import{d as k,I as R,c as w,E as J,a0 as M,k as d,h as r,G as P,f as S,l as v,j as u,n as U,i,W,u as e,w as $,y as f,a1 as j,q as E,t as _,$ as Q,z as I,r as q,o as X,a2 as Y,F as B,v as ee,a3 as z,K as Z,a4 as te,_ as oe,J as ae,a5 as se,L as ne,N as O,O as H,a6 as ie}from"#entry";import{a as V,c as L,g as A,b as re}from"./DR1pY-pW.js";import{d as ce,e as F}from"./CynKuEBQ.js";import{_ as le,a as de}from"./B2CO-M2s.js";import me from"./DxRn-wyQ.js";import{u as K,a as ue,q as pe}from"./DBMCc4Rq.js";import{u as _e}from"./BpBpkyY5.js";import"./rJCbAzvX.js";const ge={class:"post-nav"},fe={class:"operations"},he={key:0,class:"post-info"},ve=["datetime"],ye=["datetime"],be={key:2},Pe=k({inheritAttrs:!1,__name:"PostHeader",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(n){const t=n,p=R(),o=w(()=>t.categories?.[0]),c=w(()=>ce(o.value)),a=`【${p.title}】${t.title}

${t.description?`${t.description}

`:""}${new URL(t.path,p.url).href}`,{copy:g,copied:h}=J(a);return(s,l)=>{const b=U,D=W,y=E,m=M("tip");return r(),d("div",{class:P(["post-header",{"has-cover":n.image,"text-revert":n.meta?.coverRevert}])},[n.image?(r(),S(b,{key:0,class:"post-cover",src:n.image,alt:n.title},null,8,["src","alt"])):v("",!0),u("div",ge,[u("div",fe,[i(D,{icon:e(h)?"ph:check-bold":"ph:share-bold",onClick:l[0]||(l[0]=C=>e(g)())},{default:$(()=>[...l[1]||(l[1]=[f(" 文字分享 ",-1)])]),_:1},8,["icon"])]),n.meta?.hideInfo?v("",!0):(r(),d("div",he,[n.date?j((r(),d("time",{key:0,datetime:("getIsoDatetime"in s?s.getIsoDatetime:e(L))(n.date)},[i(y,{name:"ph:calendar-dots-bold"}),f(" "+_(("getPostDate"in s?s.getPostDate:e(A))(t.date)),1)],8,ve)),[[m,`创建于 ${("getLocaleDatetime"in s?s.getLocaleDatetime:e(V))(t.date)}`]]):v("",!0),("isTimeDiffSignificant"in s?s.isTimeDiffSignificant:e(re))(n.date,n.updated,.999)?j((r(),d("time",{key:1,datetime:("getIsoDatetime"in s?s.getIsoDatetime:e(L))(n.updated)},[i(y,{name:"ph:calendar-plus-bold"}),f(" "+_(("getPostDate"in s?s.getPostDate:e(A))(t.updated)),1)],8,ye)),[[m,`修改于 ${("getLocaleDatetime"in s?s.getLocaleDatetime:e(V))(t.updated)}`]]):v("",!0),e(o)?(r(),d("span",be,[i(y,{name:e(c)},null,8,["name"]),f(" "+_(e(o)),1)])):v("",!0),u("span",null,[i(y,{name:"ph:paragraph-bold"}),f(" "+_(("formatNumber"in s?s.formatNumber:e(Q))(n.readingTime?.words))+" 字 ",1)])]))]),u("h1",{class:P(["post-title",("getPostTypeClassName"in s?s.getPostTypeClassName:e(F))(n.type)])},_(n.title),3)],2)}}}),$e=Object.assign(I(Pe,[["__scopeId","data-v-d1ca4385"]]),{__name:"PostHeader"}),ke={class:"md-excerpt gradient-card"},De=k({__name:"Excerpt",props:{excerpt:{}},setup(n){const t=n,p=R(),o=q(t.excerpt),c=q("");return p.component.excerpt?.animation!==!1&&(o.value="",X(async()=>{c.value=p.component.excerpt?.caret??"_";for(const a of t.excerpt)o.value+=a,await Y(50);c.value=""})),(a,g)=>{const h=E;return r(),d("div",ke,[i(h,{name:"ph:highlighter-bold"}),f(_(e(o))+_(e(c)),1)])}}}),Ce=Object.assign(I(De,[["__scopeId","data-v-186a6ec2"]]),{__name:"PostExcerpt"}),Ie={class:"post-footer"},Te={key:0,class:"reference"},xe={class:"content"},Ne={class:"license"},we={class:"content"},Se=k({inheritAttrs:!1,__name:"PostFooter",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(n){const t=R();return(p,o)=>{const c=me;return r(),d("div",Ie,[n.references?(r(),d("section",Te,[o[0]||(o[0]=u("div",{id:"references",class:"title text-creative"}," 参考链接 ",-1)),u("div",xe,[u("ul",null,[(r(!0),d(B,null,ee(n.references,({title:a,link:g},h)=>(r(),d("li",{key:h},[i(c,{href:g||""},{default:$(()=>[f(_(a??g),1)]),_:2},1032,["href"])]))),128))])])])):v("",!0),u("section",Ne,[o[3]||(o[3]=u("div",{class:"title text-creative"}," 许可协议 ",-1)),u("div",we,[u("p",null,[o[1]||(o[1]=f(" 本文采用 ",-1)),i(c,{href:e(t).copyright.url},{default:$(()=>[f(_(e(t).copyright.name),1)]),_:1},8,["href"]),o[2]||(o[2]=f(" 许可协议，转载请注明出处。 ",-1))])])])])}}}),Le=Object.assign(I(Se,[["__scopeId","data-v-cdb923bb"]]),{__name:"PostFooter"}),Ae={class:"surround-text"},Re=["datetime"],Ee={key:0,class:"surround-post",dir:"ltr"},Be=k({__name:"PostSurround",async setup(n){let t,p;const o=z(),{data:c}=([t,p]=Z(()=>K(`surround-${o.path}`,()=>ue("content",o.path,{fields:["date","title","type"]}).order("date","ASC").where("stem","LIKE","posts/%"))),t=await t,p(),t),[a=null,g=null]=c.value??[],[h,s]=te({inheritAttrs:!1});return(l,b)=>{const D=E,y=oe;return r(),d(B,null,[i(e(h),null,{default:$(({post:m,icon:C,fallbackIcon:T,fallbackText:x,alignEnd:N})=>[i(y,{to:m?.path,class:"surround-link","align-end":N},{default:$(()=>[i(D,{class:P({"rtl-flip":m}),name:m?C:T},null,8,["class","name"]),u("div",Ae,[u("strong",{class:P(["title",("getPostTypeClassName"in l?l.getPostTypeClassName:e(F))(m?.type)])},_(m?.title||x),3),m?(r(),d("time",{key:0,datetime:("getIsoDatetime"in l?l.getIsoDatetime:e(L))(m.date)},_(("getPostDate"in l?l.getPostDate:e(A))(m.date)),9,Re)):v("",!0)])]),_:2},1032,["to","align-end"])]),_:1}),e(a)||e(g)?(r(),d("div",Ee,[i(e(s),{post:e(g),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),i(e(s),{post:e(a),icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头","align-end":""},null,8,["post"])])):v("",!0)],64)}}}),Fe=Object.assign(I(Be,[["__scopeId","data-v-b609bb41"]]),{__name:"PostSurround"}),Ge=k({__name:"[...slug]",async setup(n){let t,p;const o=z(),c=ae();c.setAside(["toc"]);const{data:a}=([t,p]=Z(()=>K(()=>o.path,()=>pe("content").path(o.path).first(),"$BPopkF1nvN")),t=await t,p(),t),g=_e(),{toc:h,meta:s}=se(g);h.value=a.value?.body.toc,s.value=a.value?.meta;const l=w(()=>a.value?.description||"");return a.value?(ne({title:a.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:a.value.image},{name:"description",content:a.value.description}]}),c.setAside(a.value.meta?.aside)):(o.meta.title="404",c.setAside(["blog-log"])),(b,D)=>{const y=$e,m=Ce,C=le,T=Le,x=Fe,N=de,G=ie;return e(a)?(r(),d(B,{key:0},[i(y,O(H(e(a))),null,16),e(l)?(r(),S(m,{key:0,excerpt:e(l)},null,8,["excerpt"])):v("",!0),i(C,{class:P(["article",("getPostTypeClassName"in b?b.getPostTypeClassName:e(F))(e(a)?.type,{prefix:"md"})]),value:e(a),tag:"article"},null,8,["class","value"]),i(T,O(H(e(a))),null,16),i(x),i(N)],64)):(r(),S(G,{key:1,icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"}))}}});export{Ge as default};
