import{_ as z}from"./8r90cx0c.js";import{d as U,c as p,k as m,h as r,j as i,i as w,u as e,t as c,_ as F,w as B,l as $,f as I,n as R,z as O,I as V,L as W,J as E,K as G,$ as H,Q as A,F as T,v as M,A as J,T as K}from"#entry";import{f as N,i as P,a as v,b as Q}from"./DR1pY-pW.js";import{a as q,b as X,g as ee,c as te}from"./DP2vACjd.js";import"./DxmdZbso.js";const ae={class:"article-item"},se=["datetime","title"],ne={class:"article-title"},oe=["datetime","title"],ie=U({__name:"Archive",props:{to:{},useUpdated:{type:Boolean},path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(t){const a=t,l=p(()=>a.useUpdated?a.updated:a.date),_=p(()=>l.value?N(new Date(l.value),"MM-dd"):""),h=p(()=>a.date?N(new Date(a.date),P(a.updated,a.date)?"MM-dd":"yyyy-MM-dd"):"");return(o,S)=>{const y=R,d=F;return r(),m("li",ae,[i("time",{datetime:("getLocaleDatetime"in o?o.getLocaleDatetime:e(v))(e(l)),title:("getLocaleDatetime"in o?o.getLocaleDatetime:e(v))(e(l))},c(e(_)),9,se),w(d,{class:"article-link gradient-card",to:t.to,title:t.description},{default:B(()=>[i("span",ne,c(t.title),1),t.useUpdated&&("isTimeDiffSignificant"in o?o.isTimeDiffSignificant:e(Q))(t.date,t.updated)?(r(),m("time",{key:0,class:"aux-date",datetime:("getLocaleDatetime"in o?o.getLocaleDatetime:e(v))(t.date),title:("getLocaleDatetime"in o?o.getLocaleDatetime:e(v))(t.date)},"  "+c(e(h)),9,oe)):$("",!0),t.image?(r(),I(y,{key:1,class:"article-cover",src:t.image,alt:t.title,loading:"lazy"},null,8,["src","alt"])):$("",!0)]),_:1},8,["to","title"])])}}}),re=Object.assign(O(ie,[["__scopeId","data-v-7d01c04a"]]),{__name:"ZArchive"}),le={class:"archive"},ce={class:"archive-title"},de={class:"archive-year"},ue={class:"archive-age"},me={class:"archive-info"},ge={class:"archive-list"},pe=U({__name:"archive",async setup(t){let a,l;const _=V();W({title:"归档",meta:[{name:"description",content:`${_.title}的所有文章归档。`}]});const h=_.component.stats.birthYear;E().setAside(["blog-stats","blog-log"]);const{data:S}=([a,l]=G(()=>te()),a=await a,l(),a),{listSorted:y,isAscending:d,sortOrder:g}=q(S),{category:D,categories:x,listCategorized:Y}=X(y),C=p(()=>{const u=Object.entries(ee(Y.value,s=>new Date(s[g.value]||0).getFullYear()));return d.value?u:u.reverse()}),Z=p(()=>C.value.reduce((u,[s,L])=>{const b=L?.reduce((n,f)=>n+f.readingTime.words,0)||0;return u[s]=H(b),u},{}));return(u,s)=>{const L=z,b=re;return r(),m("div",le,[w(L,{"is-ascending":e(d),"onUpdate:isAscending":s[0]||(s[0]=n=>A(d)?d.value=n:null),"sort-order":e(g),"onUpdate:sortOrder":s[1]||(s[1]=n=>A(g)?g.value=n:null),category:e(D),"onUpdate:category":s[2]||(s[2]=n=>A(D)?D.value=n:null),categories:e(x)},null,8,["is-ascending","sort-order","category","categories"]),(r(!0),m(T,null,M(e(C),([n,f])=>(r(),m("section",{key:n,class:"archive-group"},[i("div",ce,[i("h2",de,c(n),1),i("div",ue,[i("span",null,c(Number(n)-e(h)),1),s[3]||(s[3]=i("span",{class:"age-label"},"岁",-1))]),i("div",me,[i("span",null,c(e(Z)[n])+"字",1),i("span",null,c(f?.length)+"篇",1)])]),i("menu",ge,[w(K,{appear:"",name:"float-in"},{default:B(()=>[(r(!0),m(T,null,M(f,(k,j)=>(r(),I(b,J({key:k.path},{ref_for:!0},k,{to:k.path,"use-updated":e(g)==="updated",style:{"--delay":`${j*.03}s`}}),null,16,["to","use-updated","style"]))),128))]),_:2},1024)])]))),128))])}}}),De=O(pe,[["__scopeId","data-v-dbc9608e"]]);export{De as default};
