[{"data":1,"prerenderedAt":602},["ShallowReactive",2],{"/2025/git":3,"surround-/2025/git":591},{"id":4,"title":5,"body":6,"categories":569,"date":571,"description":5,"draft":572,"extension":573,"image":574,"meta":575,"navigation":576,"path":577,"readingTime":578,"recommend":583,"references":583,"seo":584,"sitemap":585,"stem":586,"tags":587,"type":583,"updated":589,"url":583,"__hash__":590},"content/posts/2025/Gitè‡ªåŠ¨åŒ–éƒ¨ç½².md","Gitè‡ªåŠ¨åŒ–éƒ¨ç½²",{"type":7,"value":8,"toc":546},"minimark",[9,13,18,29,40,44,47,52,58,66,72,75,86,94,101,107,114,120,124,130,134,144,154,160,195,198,205,208,219,223,226,229,235,262,267,292,298,301,304,310,316,324,327,332,338,341,346,353,356,361,383,388,419,423,429,433,439,444,459,464,470,474,480,484,491,496,502,515,522,527,530,535,538],[10,11,12],"p",{},"ç”±äºä¸æƒ³æ¯æ¬¡æ›´æ–°å®Œåšå®¢å†æ‰‹åŠ¨ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œäºæ˜¯åœ¨çº¸é¹¿å’ŒGPTçš„æ”¯æŒä¸‹ï¼Œå¼„äº†ä¸€ä¸‹è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚",[14,15,17],"h2",{"id":16},"ç¬¬1æ­¥æœåŠ¡å™¨é…ç½®","ç¬¬1æ­¥ï¼šæœåŠ¡å™¨é…ç½®",[10,19,20,21,25,26],{},"âœ… å®‰è£… ",[22,23,24],"strong",{},"Node.js"," å’Œ ",[22,27,28],{},"pnpm",[30,31,37],"pre",{"className":32,"code":34,"language":35,"meta":36},[33],"language-bash","# å®‰è£… Node.js\ncurl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -\nsudo apt install -y nodejs\n\n# å®‰è£… pnpm\nnpm install -g pnpm\n","bash","",[38,39,34],"code",{"__ignoreMap":36},[14,41,43],{"id":42},"ç¬¬2æ­¥éƒ¨ç½²-webhook-æ¥æ”¶å™¨nodejs-æœåŠ¡","ç¬¬2æ­¥ï¼šéƒ¨ç½² Webhook æ¥æ”¶å™¨ï¼ˆNodeJS æœåŠ¡ï¼‰",[10,45,46],{},"æˆ‘ä»¬ç”¨ Node å†™ä¸€ä¸ª Webhook æ¥æ”¶æœåŠ¡ï¼ˆç›‘å¬ GitHub æ¨é€äº‹ä»¶ï¼‰:",[48,49,51],"h3",{"id":50},"_1åœ¨æœåŠ¡å™¨å»ºä¸ªç›®å½•","1ã€åœ¨æœåŠ¡å™¨å»ºä¸ªç›®å½•",[30,53,56],{"className":54,"code":55,"language":35,"meta":36},[33],"mkdir -p ~/webhook-server\ncd ~/webhook-server\n",[38,57,55],{"__ignoreMap":36},[48,59,61,62,65],{"id":60},"_2åˆ›å»ºserverjs-æ–‡ä»¶","2ã€åˆ›å»º",[38,63,64],{"code":64},"server.js"," æ–‡ä»¶ï¼š",[30,67,70],{"className":68,"code":69,"language":35,"meta":36},[33],"nano server.js\n",[38,71,69],{"__ignoreMap":36},[10,73,74],{},"ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼ˆè®°å¾—æ›¿æ¢è·¯å¾„å’Œä»“åº“åˆ†æ”¯ï¼‰ï¼š",[10,76,77,78,81,82,85],{},"è®°å¾—",[22,79,80],{},"å®‰å…¨ç»„","å¼€æ”¾",[22,83,84],{},"6688","ç«¯å£ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ›´æ¢åˆ«çš„ç«¯å£ã€‚åŒæ—¶æœåŠ¡å™¨é˜²ç«å¢™ä¹Ÿè¦å¼€æ”¾è¯¥ç«¯å£",[30,87,92],{"className":88,"code":90,"language":91,"meta":36},[89],"language-js","const http = require('http');\nconst { exec } = require('child_process');\n\nconst secret = 'your_secret'; // ä¸ GitHub ä¸­ Webhook è®¾ç½®çš„ secret ä¸€è‡´\nconst PORT = 6688;// å¯ä»¥è‡ªå·±æ”¹ç«¯å£\n\nfunction verifySignature(req, body) {\n  // å¯ä»¥æ·»åŠ ç­¾åæ ¡éªŒï¼Œè¿™é‡Œç•¥å»ç®€åŒ–\n  return true;\n}\n\nconst server = http.createServer((req, res) => {\n  if (req.method === 'POST' && req.url === '/webhook') {\n    let body = '';\n    req.on('data', chunk => { body += chunk.toString(); });\n    req.on('end', () => {\n      if (!verifySignature(req, body)) {\n        res.writeHead(403);\n        res.end('Invalid signature');\n        return;\n      }\n\n      // æ‰§è¡Œæ„å»º+éƒ¨ç½²\n      exec('sh ./deploy.sh', (err, stdout, stderr) => {\n        if (err) {\n          console.error(`æ‰§è¡Œé”™è¯¯: ${err.message}`);\n          return;\n        }\n        console.log(`è¾“å‡º: ${stdout}`);\n        console.error(`é”™è¯¯: ${stderr}`);\n      });\n\n      res.writeHead(200);\n      res.end('Webhook received and processing');\n    });\n  } else {\n    res.writeHead(404);\n    res.end();\n  }\n});\n\nserver.listen(PORT, () => {\n  console.log(`ğŸš€ Webhook server running at http://localhost:${PORT}/webhook`);\n});\n\n","js",[38,93,90],{"__ignoreMap":36},[48,95,97,98],{"id":96},"_3åˆ›å»ºéƒ¨ç½²è„šæœ¬deploysh","3ã€åˆ›å»ºéƒ¨ç½²è„šæœ¬",[38,99,100],{"code":100},"deploy.sh",[30,102,105],{"className":103,"code":104,"language":35,"meta":36},[33],"nano deploy.sh\n",[38,106,104],{"__ignoreMap":36},[10,108,109,110,113],{},"å†…å®¹å¦‚ä¸‹(æ ¹æ®è‡ªå·±çš„",[22,111,112],{},"é¡¹ç›®è·¯å¾„","è°ƒæ•´)",[30,115,118],{"className":116,"code":117,"language":35,"meta":36},[33],"#!/bin/bash\n\necho \"ğŸ”„ å¼€å§‹éƒ¨ç½²...\"\n\ncd /home/qinyu/nuxt-blog || exit\n\n# æ‹‰å–æœ€æ–°ä»£ç \ngit reset --hard origin/main\ngit clean -fd\ngit pull origin main\n\n# åˆ¤æ–­ package.json æ˜¯å¦æœ‰å˜åŒ–ï¼ˆç¼“å­˜ä¸Šä¸€æ¬¡çš„å“ˆå¸Œï¼‰\nPACKAGE_HASH_FILE=\".package.hash\"\nCURRENT_HASH=$(md5sum package.json | awk '{print $1}')\n\nif [ -f \"$PACKAGE_HASH_FILE\" ]; then\n    LAST_HASH=$(cat \"$PACKAGE_HASH_FILE\")\nelse\n    LAST_HASH=\"\"\nfi\n\nif [ \"$CURRENT_HASH\" != \"$LAST_HASH\" ]; then\n    echo \"ğŸ“¦ package.json å‘ç”Ÿå˜åŒ–ï¼Œæ‰§è¡Œ pnpm install...\"\n    pnpm install\n    echo \"$CURRENT_HASH\" > \"$PACKAGE_HASH_FILE\"\nelse\n    echo \"âœ… package.json æœªå˜åŒ–ï¼Œè·³è¿‡ pnpm install\"\nfi\n\n# æ„å»ºé¡¹ç›®\necho \"âš™ï¸ å¼€å§‹æ„å»ºé¡¹ç›®...\"\npnpm build\n\n# æ‹·è´ç”Ÿæˆçš„æ–‡ä»¶åˆ°ç›®æ ‡ç›®å½•\necho \"ğŸšš æ‹·è´åˆ°ç½‘ç«™æ ¹ç›®å½•...\"\nrm -rf /www/wwwroot/yingzya.top/*\ncp -r .output/public/* /www/wwwroot/yingzya.top/\n\necho \"âœ… éƒ¨ç½²å®Œæˆ\"\n",[38,119,117],{"__ignoreMap":36},[48,121,123],{"id":122},"_4å¯åŠ¨æœåŠ¡pm2é˜²æŒ‚","4ã€å¯åŠ¨æœåŠ¡(pm2é˜²æŒ‚)",[30,125,128],{"className":126,"code":127,"language":35,"meta":36},[33],"npm install -g pm2\npm2 start server.js --name webhook\npm2 save\npm2 startup  # è®¾ç½®å¼€æœºè‡ªå¯\n",[38,129,127],{"__ignoreMap":36},[14,131,133],{"id":132},"ç¬¬-3-æ­¥github-è®¾ç½®-webhook","ç¬¬ 3 æ­¥ï¼šGitHub è®¾ç½® Webhook",[10,135,136,137,140,141],{},"æ‰“å¼€ GitHub ä»“åº“ â†’ ",[38,138,139],{"code":139},"Settings"," â†’ ",[38,142,143],{"code":143},"Webhooks",[145,146,147],"ul",{},[148,149,150,153],"li",{},[22,151,152],{},"Payload URL","ï¼š",[30,155,158],{"className":156,"code":157,"language":35,"meta":36},[33],"http://ä½ çš„æœåŠ¡å™¨å…¬ç½‘IP:6688/webhook\n",[38,159,157],{"__ignoreMap":36},[145,161,162,170,183],{},[148,163,164,153,167],{},[22,165,166],{},"Content type",[38,168,169],{"code":169},"application/json",[148,171,172,175,176,178,179,182],{},[22,173,174],{},"Secret","ï¼šå¡«å†™ä½ åœ¨ ",[38,177,64],{"code":64}," ä¸­è®¾çš„ secretï¼ˆæ¯”å¦‚ ",[38,180,181],{"code":181},"your_secret","ï¼‰",[148,184,185,186],{},"è§¦å‘äº‹ä»¶é€‰æ‹©ï¼š",[145,187,188],{},[148,189,190,191,194],{},"åªå‹¾é€‰ ",[38,192,193],{"code":193},"Just the push event"," å³å¯",[14,196,197],{"id":197},"å¯èƒ½çš„é”™è¯¯",[10,199,200,201,204],{},"ä½ å¯èƒ½ç¢°åˆ°Githubä¸ŠWebhookè¿”å›200ï¼Œä½†æ˜¯æ²¡æ›´æ–°ï¼Œè¯·æŸ¥çœ‹ä½ è®¾ç½®çš„ç›®å½• ",[38,202,203],{"code":203},"/home/qinyu/nuxt-blog"," å¹¶ä¸æ˜¯ä¸€ä¸ª Git ä»“åº“ã€‚",[10,206,207],{},"å¯èƒ½ä½ ï¼š",[145,209,210,216],{},[148,211,212,213],{},"æ²¡æœ‰æ‰§è¡Œ ",[38,214,215],{"code":215},"git clone ä»“åº“åœ°å€",[148,217,218],{},"æˆ–è€…éƒ¨ç½²è„šæœ¬ä¸­çš„å·¥ä½œç›®å½•è®¾ç½®é”™äº†",[14,220,222],{"id":221},"nuxté™æ€éƒ¨ç½²","Nuxté™æ€éƒ¨ç½²",[10,224,225],{},"å¦‚æœä½ çš„åšå®¢å’Œæˆ‘ä¸€æ ·æ˜¯Nuxtçš„è¯ï¼Œå®Œå…¨å¯ä»¥æœ¬åœ°æ„å»º + åªåŒæ­¥é™æ€æ–‡ä»¶åˆ°æœåŠ¡å™¨ã€‚",[10,227,228],{},"æˆ‘ä¹‹å‰ç”¨ä¸Šé¢çš„æ–¹å¼ï¼ŒæœåŠ¡å™¨ä¸Šæ„å»ºï¼Œå¤ªæ…¢äº†ï¼Œäºæ˜¯æˆ‘æƒ³åˆ°äº†è¿™ç§æ–¹æ³•ã€‚",[10,230,231,232],{},"åœ¨Githubåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œç”¨æ¥ä¸“é—¨å­˜å‚¨é™æ€æ–‡ä»¶ï¼Œç„¶åæœåŠ¡å™¨åªæ‹‰å–è¿™ä¸ªåˆ†æ”¯ã€‚è¿™é‡Œå–åˆ†æ”¯ä¸º",[38,233,234],{"code":234},"gh-pages",[145,236,237,246,251],{},[148,238,239],{},[22,240,241,242,245],{},"æ¯æ¬¡ push ä»£ç åˆ° ",[38,243,244],{"code":244},"main"," åˆ†æ”¯",[148,247,248],{},[22,249,250],{},"è‡ªåŠ¨æ„å»º Nuxt é™æ€ç«™ç‚¹",[148,252,253],{},[22,254,255,256,259,260,245],{},"è‡ªåŠ¨æŠŠ ",[38,257,258],{"code":258},".output/public"," æ¨é€åˆ° ",[38,261,234],{"code":234},[10,263,264],{},[22,265,266],{},"æœåŠ¡å™¨åªéœ€è¦ï¼š",[145,268,269,276,282],{},[148,270,271,272,275],{},"æ‹‰å–æœ€æ–°çš„é™æ€æ–‡ä»¶ï¼ˆæ¯”å¦‚ ",[38,273,274],{"code":274},"git pull"," æˆ–é€šè¿‡ rsyncï¼‰",[148,277,278,279],{},"ç›´æ¥éƒ¨ç½²åˆ°ç½‘ç«™ç›®å½• ",[38,280,281],{"code":281},"/www/wwwroot/xxxxx",[148,283,284,285,288,289],{},"ä¸ç”¨ ",[38,286,287],{"code":287},"pnpm install"," æˆ– ",[38,290,291],{"code":291},"pnpm build",[10,293,294,297],{},[22,295,296],{},"æœåŠ¡å™¨åˆå§‹åŒ–",":",[10,299,300],{},"å‡è®¾ä½ æœåŠ¡å™¨ç½‘ç«™ç›®å½•ä¸ºç©ºæˆ–æ²¡åˆå§‹åŒ–è¿‡ï¼š",[10,302,303],{},"ä¸‹é¢æ˜¯ä»¥æˆ‘è‡ªå·±çš„ä¸ºä¾‹:",[30,305,308],{"className":306,"code":307,"language":35,"meta":36},[33],"cd /www/wwwroot\ngit clone https://github.com/yingzya/yingzya.github.io.git yingzya.top\ncd yingzya.top\ngit checkout -b gh-pages origin/gh-pages\n",[38,309,307],{"__ignoreMap":36},[10,311,312,313],{},"ç„¶ååˆ›å»ºæ–‡ä»¶",[38,314,315],{"code":315},".github/workflows/deploy.yml",[30,317,322],{"className":318,"code":320,"language":321,"meta":36},[319],"language-yaml","name: Deploy Nuxt Static Site\n\non:\n  push:\n    branches:\n      - main\n\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '18'  # æˆ–ä½ æœ¬åœ°ç”¨çš„ç‰ˆæœ¬\n\n      - name: Install pnpm\n        run: npm install -g pnpm\n\n      - name: Install dependencies\n        run: pnpm install\n\n      - name: Build Nuxt project\n        run: pnpm build\n\n      - name: Deploy to gh-pages\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: .output/public\n          publish_branch: gh-pages\n","yaml",[38,323,320],{"__ignoreMap":36},[48,325,197],{"id":326},"å¯èƒ½çš„é”™è¯¯-1",[10,328,329],{},[38,330,331],{"code":331},"The requested URL returned error: 403",[10,333,334,337],{},[38,335,336],{"code":336},"github-actions[bot]"," æ²¡æœ‰æƒé™æ¨é€åˆ°ä½ çš„ä»“åº“ï¼Œå¯¼è‡´ 403 æ‹’ç»è®¿é—®ã€‚",[10,339,340],{},"æ‰“å¼€ä½ Githubçš„é¡¹ç›®ï¼Œç„¶åsettingsï¼Œç„¶åå·¦ä¾§ç‚¹å‡»Actionsï¼Œç‚¹å‡»Gereralï¼Œç¡®ä¿ä¸‹é¢çš„ä¸¤ä¸ªå‹¾é€‰ä¸Šäº†",[342,343],"pic",{":caption":344,"src":345},"null","https://7.isyangs.cn/20250731/723b20ec409cf0976ee3459cf32c2809.png",[10,347,348,349,352],{},"è®°å¾—é…ç½®ä¸‹é¢çš„",[22,350,351],{},"Token","ï¼Œå¦‚æœè®¿é—®æƒé™ä¸å¤Ÿçš„è¯ã€‚",[342,354],{":caption":344,"src":355},"https://7.isyangs.cn/20250731/b67f9cf6ba2490e5d050a288d0ecca0f.png",[10,357,358],{},[22,359,360],{},"è§£å†³æ–¹æ³•ä¸€ï¼šç»™ Actions ç”¨ä¸€ä¸ª PAT ä»£æ›¿é»˜è®¤ token",[145,362,363,374,380],{},[148,364,365,366,369,370,373],{},"ä½ å¯ä»¥åœ¨ GitHub ç”Ÿæˆä¸€ä¸ª ",[22,367,368],{},"Personal Access Token (PAT)","ï¼Œæƒé™è‡³å°‘è¦åŒ…å« ",[22,371,372],{},"repo (æ‰€æœ‰)"," æƒé™",[148,375,376,377],{},"ç„¶ååœ¨ä½ çš„ä»“åº“ Settings â†’ Secrets â†’ New repository secret æ–°å»ºä¸€ä¸ªå˜é‡ï¼Œæ¯”å¦‚å« ",[38,378,379],{"code":379},"PERSONAL_TOKEN",[148,381,382],{},"ä¿®æ”¹ workflow ç”¨è¿™ä¸ª tokenï¼š",[10,384,385],{},[22,386,387],{},"ç®€å•æ­¥éª¤ç”Ÿæˆ PATï¼š",[389,390,391,400,403,410,413],"ol",{},[148,392,393,394],{},"è®¿é—® ",[395,396,397],"a",{"href":397,"rel":398},"https://github.com/settings/tokens",[399],"nofollow",[148,401,402],{},"ç‚¹å‡»â€œGenerate new token (classic)â€",[148,404,405,406,409],{},"é€‰ä¸­ ",[38,407,408],{"code":408},"repo"," æƒé™ï¼ˆå…¨éƒ¨æƒé™ï¼‰",[148,411,412],{},"ç”Ÿæˆåå¤åˆ¶ä»¤ç‰Œ",[148,414,415,416,418],{},"ä»“åº“â†’Settingsâ†’Secretsâ†’Actionsï¼Œæ–°å»º ",[38,417,379],{"code":379},"ï¼Œç²˜è´´ä¿å­˜",[48,420,422],{"id":421},"nodejsæœåŠ¡","NodeJSæœåŠ¡",[30,424,427],{"className":425,"code":426,"language":91,"meta":36},[89],"const http = require('http');\nconst { exec } = require('child_process');\n\nconst PORT = 6688;  // ç›‘å¬ç«¯å£\nconst SECRET = 'your_webhook_secret'; // ä½ åœ¨ GitHub webhook é‡Œè®¾ç½®çš„ secretï¼Œå’Œè¿™é‡Œå¯¹åº”\n\n// ç®€å•éªŒè¯ç­¾åï¼ˆå¯é€‰ï¼Œç”Ÿäº§å»ºè®®å®ç°ï¼‰\nfunction verifySignature(req, body) {\n  // è¿™é‡Œä¸ºäº†ç¤ºä¾‹ï¼Œæš‚æ—¶ä¸éªŒè¯ï¼Œç›´æ¥è¿”å› true\n  return true;\n}\n\nconst server = http.createServer((req, res) => {\n  if (req.method === 'POST' && req.url === '/webhook') {\n    let body = '';\n    req.on('data', chunk => body += chunk);\n    req.on('end', () => {\n      if (!verifySignature(req, body)) {\n        res.writeHead(403);\n        res.end('Invalid signature');\n        return;\n      }\n\n      let payload;\n      try {\n        payload = JSON.parse(body);\n      } catch {\n        res.writeHead(400);\n        res.end('Invalid JSON');\n        return;\n      }\n\n      // åªå¤„ç† gh-pages åˆ†æ”¯çš„ push äº‹ä»¶\n      if (payload.ref === 'refs/heads/gh-pages') {\n        console.log('ğŸš€ gh-pages åˆ†æ”¯æ›´æ–°ï¼Œå¼€å§‹éƒ¨ç½²è„šæœ¬...');\n        exec('sh /home/qinyu/deploy.sh', (err, stdout, stderr) => {\n          if (err) {\n            console.error(`âŒ éƒ¨ç½²è„šæœ¬æ‰§è¡Œå¤±è´¥: ${err.message}`);\n            return;\n          }\n          console.log(`âœ… éƒ¨ç½²è„šæœ¬è¾“å‡º:\\n${stdout}`);\n          if (stderr) {\n            console.error(`âš ï¸ éƒ¨ç½²è„šæœ¬é”™è¯¯è¾“å‡º:\\n${stderr}`);\n          }\n        });\n      } else {\n        console.log(`å¿½ç•¥é gh-pages åˆ†æ”¯æ›´æ–°: ${payload.ref}`);\n      }\n\n      res.writeHead(200);\n      res.end('Webhook received');\n    });\n  } else {\n    res.writeHead(404);\n    res.end();\n  }\n});\n\nserver.listen(PORT, () => {\n  console.log(`Webhook ç›‘å¬æœåŠ¡å·²å¯åŠ¨ï¼Œç«¯å£ ${PORT}`);\n});\n\n",[38,428,426],{"__ignoreMap":36},[48,430,432],{"id":431},"è‡ªåŠ¨éƒ¨ç½²è„šæœ¬ç¤ºä¾‹deploysh","è‡ªåŠ¨éƒ¨ç½²è„šæœ¬ç¤ºä¾‹ï¼ˆdeploy.shï¼‰",[30,434,437],{"className":435,"code":436,"language":35,"meta":36},[33],"#!/bin/bash\n\nset -e\n\n# 1. ç½‘ç«™ç›®å½•ï¼ˆè¯·æ”¹æˆä½ çš„è·¯å¾„ï¼‰\nWEB_ROOT=\"/www/wwwroot/yingzya.top\"\n\n# 2. è¿›å…¥ç½‘ç«™ç›®å½•\ncd \"$WEB_ROOT\" || { echo \"ç›®å½•ä¸å­˜åœ¨ï¼Œé€€å‡º\"; exit 1; }\n\n# 3. ç¡®ä¿å½“å‰åœ¨ gh-pages åˆ†æ”¯\ngit checkout gh-pages\n\n# 4. æ‹‰å–æœ€æ–°ä»£ç \ngit pull origin gh-pages\n\necho \"âœ… é™æ€æ–‡ä»¶å·²æ›´æ–°ï¼š$(date '+%Y-%m-%d %H:%M:%S')\"\n",[38,438,436],{"__ignoreMap":36},[10,440,441],{},[22,442,443],{},"1. å…ˆåˆ›å»ºéƒ¨ç½²è„šæœ¬æ–‡ä»¶",[10,445,446,447,450,451,454,455,458],{},"æ–‡ä»¶åœ¨ä¸Šé¢ï¼ŒæŒ‰ ",[38,448,449],{"code":449},"Ctrl + O"," ä¿å­˜ï¼Œ",[38,452,453],{"code":453},"Enter"," ç¡®è®¤ï¼Œç„¶å ",[38,456,457],{"code":457},"Ctrl + X"," é€€å‡ºç¼–è¾‘å™¨ã€‚",[10,460,461],{},[22,462,463],{},"2. èµ‹äºˆå¯æ‰§è¡Œæƒé™",[30,465,468],{"className":466,"code":467,"language":35,"meta":36},[33],"chmod +x /home/qinyu/deploy.sh\n",[38,469,467],{"__ignoreMap":36},[48,471,473],{"id":472},"ä½¿ç”¨-pm2-å®ˆæŠ¤è¿è¡Œå¯é€‰","ä½¿ç”¨ PM2 å®ˆæŠ¤è¿è¡Œ(å¯é€‰)",[30,475,478],{"className":476,"code":477,"language":35,"meta":36},[33],"npm install -g pm2\npm2 start /home/qinyu/webhook.js\npm2 save\npm2 startup\n",[38,479,477],{"__ignoreMap":36},[14,481,483],{"id":482},"è¿›é˜¶-githubapp","è¿›é˜¶-GitHubApp",[10,485,486,487,490],{},"æ¯ä¸ª GitHub App åœ¨ä¸åŒä»“åº“/ç»„ç»‡ä¸‹å®‰è£…åï¼Œä¼šç”Ÿæˆä¸€ä¸ª ",[22,488,489],{},"Installation ID","ã€‚",[10,492,493],{},[22,494,495],{},"1ã€å‡†å¤‡",[10,497,498,501],{},[22,499,500],{},"App ID","ï¼ˆæ•°å­—ï¼ŒGitHub App è®¾ç½®é¡µèƒ½çœ‹åˆ°ï¼‰",[10,503,504,507,508,511,512],{},[22,505,506],{},"ç§é’¥ PEM æ–‡ä»¶","ï¼ˆä½ åœ¨ GitHub App è®¾ç½® â†’ Generate a private key ç”Ÿæˆçš„ ",[38,509,510],{"code":510},".pem"," æ–‡ä»¶ï¼‰â€”â€”",[22,513,514],{},"æ ¸å¿ƒæ­¥éª¤",[10,516,517],{},[518,519],"img",{"alt":520,"src":521},"image-20250927210102621","https://video.yangzy.top/picgo/image-20250927210102621.png",[10,523,524],{},[22,525,526],{},"2. ç”Ÿæˆ JWT",[10,528,529],{},"JWT = Header + Payload + ç­¾åï¼ˆç”¨ç§é’¥ PEMï¼‰",[10,531,532],{},[22,533,534],{},"3. è·å– installation_id",[10,536,537],{},"ç”¨ JWT è°ƒ APIï¼š",[30,539,544],{"className":540,"code":542,"language":543},[541],"language-text","curl -s -H \"Authorization: Bearer \u003CJWT>\" \\\n     -H \"Accept: application/vnd.github+json\" \\\n     https://api.github.com/app/installations\n","text",[38,545,542],{"__ignoreMap":36},{"title":36,"searchDepth":547,"depth":547,"links":548},4,[549,551,560,561,562,568],{"id":16,"depth":550,"text":17},2,{"id":42,"depth":550,"text":43,"children":552},[553,555,557,559],{"id":50,"depth":554,"text":51},3,{"id":60,"depth":554,"text":556},"2ã€åˆ›å»ºserver.js æ–‡ä»¶ï¼š",{"id":96,"depth":554,"text":558},"3ã€åˆ›å»ºéƒ¨ç½²è„šæœ¬deploy.sh",{"id":122,"depth":554,"text":123},{"id":132,"depth":550,"text":133},{"id":197,"depth":550,"text":197},{"id":221,"depth":550,"text":222,"children":563},[564,565,566,567],{"id":326,"depth":554,"text":197},{"id":421,"depth":554,"text":422},{"id":431,"depth":554,"text":432},{"id":472,"depth":554,"text":473},{"id":482,"depth":550,"text":483},[570],"Linux","2025-07-31 19:42:40",false,"md","https://7.isyangs.cn/20250819/fd666e8034acd69bbf7d83d3b79de274.webp",{},true,"/2025/git",{"text":579,"minutes":580,"time":581,"words":582},"9 min read",8.06,483600,1612,null,{"title":5,"description":5},{"loc":577},"posts/2025/Gitè‡ªåŠ¨åŒ–éƒ¨ç½²",[588],"Git","2025-09-27 21:13:40","x24l9BYUrSWTsmPz-15bXd-2JF-rpVpBrVUUpng7cI4",[592,597],{"title":593,"path":594,"stem":595,"date":596,"type":583,"children":-1},"2025è“æ¡¥æ¯çªå‡»è®­ç»ƒ","/2025/lanqiao2025","posts/2025/lanqiao2025","2025-03-27 23:45:35",{"title":598,"path":599,"stem":600,"date":601,"type":583,"children":-1},"PicGoé…ç½®å»å›¾å›¾åºŠ","/2025/picgo","posts/2025/PicGoå®ç°å»å›¾å›¾åºŠ","2025-08-01 17:15:43",1759024133783]